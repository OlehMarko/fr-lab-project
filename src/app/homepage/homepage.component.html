<app-poster></app-poster>
<div class="homepage" id="shop">
  <div class="leftcol">
    <div>
      <div class="allProducts">
        <button md-button (click) = "sorting('all')">
            show all products
        </button>
      </div>
      <form class="searching-form">
        <md-form-field class="example-full-width">
          <input mdInput 
                    placeholder="template searching" 
                    [(ngModel)] = "searchTerm"  
                    (ngModelChange) = "search(searchTerm)" 
                    class="search" 
                    name="userFilter"> 
        </md-form-field>
      </form>
    </div>
    <div class="mobileMenus">
      <div class="productTypeResponsive">
          <button md-button [mdMenuTriggerFor]="menu1">type</button>
          <md-menu #menu1="mdMenu">
              <button md-menu-item (click) = "sorting('all')">all</button>
              <button md-menu-item *ngFor = "let templateType of templateTypes" 
              (click) = "sorting(templateType.type)">
              <span  [innerHTML] = "templateType.tag"  class="icons"></span>
            </button>
          </md-menu>
      </div>
      <div class="productCategoryResponsive">
          <button md-button [mdMenuTriggerFor]="menu2">category</button>
          <md-menu #menu2="mdMenu">
            <button md-menu-item *ngFor = "let productCategory of categories" 
            (click) = "sorting(productCategory.category)">
              {{productCategory.category}}
            </button>
          </md-menu>
      </div>
    </div>
    <md-list class="objectTypeFilter">
      <h2 md-subheader>Sorting by type</h2>
      <div class="iconsBlock">
        <div *ngFor = "let templateType of templateTypes" 
            (click) = "sorting(templateType.type)" class="icons">
          <md-list-item (click)="navChanged(templateType.type)" [ngClass]="{'active' : templateType.type === selected}" [innerHTML] = "templateType.tag">
          </md-list-item>
        </div>
      </div>
      <h2 md-subheader>Sorting by category</h2>
      <div *ngFor = "let productCategory of categories" 
          (click) = "sorting(productCategory.category)">
        <ng-container *ngIf = " productCategory.category !=='all' ">
          <md-list-item (click)="navChanged(productCategory.category)" [ngClass]="{'active' : productCategory.category === selected}">
            {{productCategory.category}}
          </md-list-item>
        </ng-container>
      </div>
    </md-list>
  </div> 
  <div class = "rightcol wrapper">
    <div class="oneObjet" *ngFor = "let product of prods | paginate: { itemsPerPage: 12, currentPage: p}">
        <md-icon *ngIf="isAdmin" svgIcon="mode_edit" class="edit" (click)="onEdit(product)"></md-icon>
      <div class="productImg">
        <img src="{{ product.svg }}" alt="">
      </div>
      <div class="info">
        <div class = "aboutTheProduct">
          <h3>{{product.name}}</h3>
          <ul>
            <li><span>type:</span> {{product.type}}</li>
            <li><span>category:</span> {{product.category}}</li>
            <li><span>price:</span>  {{ product.price }}</li>
            <ng-container *ngFor = "let template of templateTypes; let i = index">
                <ng-container *ngIf = "product.type === template.type">
                  <li>
                    <md-select [(ngModel)]="mySize" #price placeholder="sizes" (ngModelChange)="setSize(mySize, product)">
                        <md-option *ngFor="let size of template.size" [value]="size">
                          {{size}}
                        </md-option>
                    </md-select> 
                  </li>             
                </ng-container>
            </ng-container>
          </ul>
        </div>
        <button md-raised-button (click)="addToCart(product)">add to my card</button>
        <button md-raised-button *ngIf = "deleteButton" (click)="delete()">delete</button>
      </div>  
    </div>
    <pagination-controls (pageChange)="p = $event" autoHide="true" class = "pagination" previousLabel="" nextLabel=""></pagination-controls>
    <div *ngIf = " prods?.length === 0" class="noResults">No results</div>
  </div>
</div>
